"use strict";var app=angular.module("trunkApp",["ngRoute","highcharts-ng","colorpicker.module"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/charts",{templateUrl:"views/charts.html",controller:"ChartsCtrl"}).when("/table",{templateUrl:"views/foram-table.html",controller:"TableCtrl"}).when("/databases",{templateUrl:"views/databases.html",controller:"DatabasesCtrl"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl"}).when("/visualisation",{templateUrl:"views/visualisation.html",controller:"VisualisationCtrl"}).otherwise({redirectTo:"/"})}]),app.service("DatasetService",function(){var a=[];this.putProducts=function(b){a=b},this.getProducts=function(){return a}}),app.directive("foramTable",function(){return{restrict:"E",scope:{foram:"=foram"},templateUrl:"/views/foram-table.html"}}),app.directive("menu",function(){return{restrict:"E",scope:{menu:"=menu"},templateUrl:"/views/menu-temp.html"}}),app.directive("menuPosition",["$location","$compile","$templateCache",function(a,b,c){return{restrict:"E",scope:{position:"="},templateUrl:"/views/submenu-temp.html",link:function(a,d,e){var f=c.get("/views/submenu-temp.html");console.log(f),a.position.list&&(f+='<ul  class="submenu"><menu-position ng-repeat="subposition in position.list" position="subposition"></menu-position></ul>'),f='<li class="menu-option" id="{{position.args}}" ng-click="position.click(position.args)">'+f+"</li>";var g=angular.element(f);b(g)(a),d.replaceWith(g)}}}]),app.service("Database",function(){return{addDatabase:function(){console.log("addDatabase")},searchDatabase:function(){console.log("searchDatabase")},deleteDatabase:function(){console.log("deleteDatabase")}}}),app.controller("menuCtrl",["$scope","Database","$location",function(a,b,c){a.go=function(a){angular.element(document.getElementsByClassName("menu-option active")).toggleClass("active"),c.path(a),console.log("go() with url = "+a)},a.showList=function(a){var b=angular.element(document.getElementsByClassName("menu-option active")),c=angular.element(document.getElementById(a));b.attr("id")!=c.attr("id")&&b.toggleClass("active"),c.toggleClass("active")},a.menu={name:"FORAM",icon:"bars",list:[{name:"Home",icon:"home",args:"/",click:a.go},{name:"Databases",icon:"database",args:"/databases",click:a.go},{name:"Browse",icon:"folder-open",args:"/table",click:a.go},{name:"3D Visualisation",icon:"cube",args:"/visualisation",click:a.go},{name:"Charts",icon:"pie-chart",args:"/charts",click:a.go},{name:"Settings",icon:"gear",args:"/settings",click:a.go}]}}]),app.controller("TableCtrl",["$location","$scope","$http","DatasetService",function(a,b,c,d){b.forams=[],b.currentSet={start:null,stop:null},b.forams=[{id:{$oid:"55588ef13338610003000000"},kx:.1,ky:.2,kz:.35,tf:.4,phi:.5,beta:.6},{id:{$oid:"55588ef13338610003000001"},kx:.12,ky:.21,kz:.32,tf:.4,phi:.5,beta:.6},{id:{$oid:"55588ef13338610003000002"},kx:.13,ky:.22,kz:.31,tf:.4,phi:.5,beta:.6},{id:{$oid:"55588ef13338610003000003"},kx:.14,ky:.23,kz:.32,tf:.4,phi:.5,beta:.6},{id:{$oid:"55588ef13338610003000004"},kx:.15,ky:.24,kz:.33,tf:.4,phi:.5,beta:.6},{id:{$oid:"55588ef13338610003000005"},kx:.16,ky:.25,kz:.43,tf:.4,phi:.5,beta:.6},{id:{$oid:"55588ef13338610003000006"},kx:.17,ky:.2,kz:.53,tf:.4,phi:.5,beta:.6},{id:{$oid:"55588ef13338610003000007"},kx:.18,ky:.72,kz:.35,tf:.4,phi:.5,beta:.6}],b.status=status,b.headers=Object.keys(b.forams[0]),b.optionsWindow=$("#options"),$(function(){$("#selectable").selectable({filter:"tr",start:function(a,c){b.currentSet.start=void 0,b.currentSet.stop=null},selected:function(a,c){var d=parseInt(c.selected.getAttribute("data-index"));void 0===b.currentSet.start&&(b.currentSet.start=d),(d>b.currentSet.stop||!b.currentSet.stop)&&(b.currentSet.stop=d),console.log("Start"+b.currentSet.start),console.log("Stop"+b.currentSet.stop)},stop:function(a,c){b.optionsWindow.css({display:"block",left:a.screenX-6+"px",top:a.screenY-93+"px"})}})}),b.generateChart=function(){console.log("przenosimy do charts"),d.putProducts(b.forams.slice(b.currentSet.start,b.currentSet.stop+1)),a.path("/charts")}}]),app.controller("MainCtrl",["$scope","$http","$q",function(a,b,c){}]),app.controller("AboutCtrl",["$scope",function(a){}]),app.controller("SettingsCtrl",["$scope","$http","$q",function(a,b,c){}]),app.controller("VisualisationCtrl",["$scope","$http","$q",function(a,b,c){}]),app.controller("ChartsCtrl",["$scope","DatasetService",function(a,b){a.chartEditingMode=!1,a.$watch("chartEditingMode",function(){a.chartEditingModeStatus=a.chartEditingMode?"Finish":"Edit chart"}),a.colors=[],a.currentData="kx",a.chartConfig={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],options:{chart:{zoomType:"x"},rangeSelector:{enabled:!0},navigator:{enabled:!0}},series:[],title:{text:"Hello"},exporting:{enabled:!0}},a.data=b.getProducts(),a.changeDataSource=function(){a.chartConfig.series=[];var b={data:[],name:"Series 1"};a.data.forEach(function(c){b.name=a.currentData,b.data.push(c[a.currentData])}),a.chartConfig.series.push(b)},a.restoreDefaultSeriesColor=function(){var b=0,c=a.chartConfig.colors.length-1;a.chartConfig.series.forEach(function(d){d.color=a.chartConfig.colors[c>b?b:c],b++})},Highcharts.createElement("link",{href:"//fonts.googleapis.com/css?family=Unica+One",rel:"stylesheet",type:"text/css"},null,document.getElementsByTagName("head")[0]),Highcharts.theme={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{linearGradient:{x1:0,y1:0,x2:1,y2:1},stops:[[0,"#2a2a2b"],[1,"#3e3e40"]]},style:{fontFamily:"'Unica One', sans-serif"},plotBorderColor:"#606063"},title:{style:{color:"#E0E0E3",textTransform:"uppercase",fontSize:"20px"}},subtitle:{style:{color:"#E0E0E3",textTransform:"uppercase"}},xAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:"#F0F0F0"}},plotOptions:{series:{dataLabels:{color:"#B0B0B3"},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"}},credits:{style:{color:"#666"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",background2:"#505053",dataLabelsColor:"#B0B0B3",textColor:"#C0C0C0",contrastTextColor:"#F0F0F3",maskColor:"rgba(255,255,255,0.3)"},Highcharts.setOptions(Highcharts.theme)}]),app.controller("DatabasesCtrl",["$scope","$http","$q",function(a,b,c){}]);